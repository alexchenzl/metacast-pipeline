import json
import requests

# Read the data from your JSON file
with open('ManualChecked.txt', 'r') as file:
    data = json.load(file)


filtered_data = [entry for entry in data if entry.get("OpenAICheckRelevant") != "Not"]

# Reformat the data
reformatted_data = []
for entry in filtered_data:
    reformatted_entry = {
        "hash": entry["hash"],
        "username": entry["username"],
        "fid": entry["fid"],
        "text": entry["text"],
        "channel": entry["channel"],
        "tags": entry.get("tags", ""),
        "likes": entry["likes"],
        "replies": entry["replies"],
        "recasts": entry["recasts"],
        "scv": entry["scv"],
        "casted_at": entry["casted_at"]
    }
    reformatted_data.append(reformatted_entry)

# API endpoint
url = 'https://faradmin.vercel.app/api/submit'

# Headers
headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5' 
}

print(json.dumps(reformatted_data, indent=2))

# Send POST request
response = requests.post(url, headers=headers, json=reformatted_data)

# Check response
if response.status_code == 200:
    print("Data submitted successfully!")
    print(json.dumps(reformatted_data, indent=2))
else:
    print(f"Error submitting data. Status code: {response.status_code}")
    print(response.text)